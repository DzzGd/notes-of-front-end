# 前端插件学习基础

![插件封装](https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1574766660878&di=76af3456f061873e7bb8306b914f1b05&imgtype=jpg&src=http%3A%2F%2Fimg1.imgtn.bdimg.com%2Fit%2Fu%3D2915188216%2C4251392316%26fm%3D214%26gp%3D0.jpg)

作为一个前端er, 如果不会写一个小插件, 感觉就很low, 因此, 踏上了插件封装的艰难之路, hiahiahiahia

插件的封装, 不仅能提高自己的编程思维, 还能在实际工作中效率提升


## 插件的需求

引用一位[博主](https://blog.csdn.net/weixin_33772645/article/details/93598600)说的:

我们写代码, 并不是所有的业务或者逻辑代码都要抽出来复用

首先, 我们得看一下是否需要将一部分经常重复的代码抽象出来, 写到一个单独的文件中为以后再次使用

再看一下我们的业务逻辑是否可以为团队服务

插件不是随手就写成的, 而是根据自己业务逻辑进行抽象

没有放之四海而皆准的插件, 只有对插件, 之所以叫做插件, 那么就是开箱即用, 或者我们只要添加一些配置参数就可以达到我们需要的结果. 如果都符合了这些情况, 我们才去考虑做一个插件

## 插件需要满足的条件

一个可复用的插件需要满足以下条件:
+ 插件自身的作用域与用户当前的作用域相互独立, 也就是插件内部的私有变量不能影响使用者的环境变量
+ 插件需具备默认设置参数
+ 插件除了具备已实现的基本功能外, 需提供部分API, 使用者可以通过该API修改插件功能的默认参数, 从而实现用户自定义插件效果
+ 插件需提供监听入口, 及针对指定元素进行监听, 使得该元素与插件响应达到插件效果
+ 插件支持链式调用

## 步骤

1. 使用自执行函数

使用自执行函数, 封装不污染全局变量, 并在里面定义一个构造函数, 最后会把这个函数暴露给外部, 以便全局调用

```js
;(function () {
  const demo = function(options) {
  // ...
  }
})()
```

2. 传参-实现需求灵活变更

```js
;(function () {
  const demo = function(options) {
    this.height = options.h || 175 //默认值
    this.year = options.y || 20    // 默认值

    // 或自己实现一个类似$.extend()的方法实现合并
    // this.options = extend({
    //   height: 175,
    //   year  : 20
    // }, options)
  }
})()

new demo({
  h: 183,
  y: 23
})
```
3. 然后在初始化时执行一些操作

```js
;(function (w) {
  const demo = function(options) {
    this.height = options.h || 175 //默认值
    this.year = options.y || 20    // 默认值

    // 或自己实现一个类似$.extend()的方法实现合并
    // this.options = extend({
    //   height: 175,
    //   year  : 20
    // }, options)
    this.init()
  }
  demo.prototype.init = function () {
    alert(`身高是${this.height}年龄是${this.year}`)
  }

  w.demo = demo
})(window)

// 调用
new demo({
  h: 183,
  y: 23
})
```

## 结语

是封装js的时候我们要考虑周全, 比如它的扩展性和兼容性, 还有性能怎么样, 还有没必要的就不需要封装了, 要有选择性.

现在网上已经完成的插件数不胜数, 而且功能又十分强大, 但是恰恰是这点, 有的时候一个很大的插件我们只用到很小的一部分, 那么就需要我们自己修改成适合我们自己的了, 而且有些项目的风格和现在的插件风格也不同, 所以关键是要适合自己的项目.

还有一点就是扩展性, 单独的一个功能很好实现, 但是又出现了需求是在这个插件基础上在添加一些效果, 但是之前的插件已经写得非常的紧密, 要添加其他功能就必须在原有的代码上大改, 这样的话还不如重新写一个插件

因此, 在封装插件的过程不仅要注意它的复用性, 还要有扩展性, 我们只需要在原有的基础上进行添加, 或者修改少量代码, 就能集成新的功能就再好不过了.